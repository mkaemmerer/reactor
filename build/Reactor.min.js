/*! Reactor 2013-10-10 */
window.Reactor=function(){function a(){return this.value}function b(a){return function(){return a.addDependency(this),this.value}}function c(c,e){return function(){c.clearDependencies(),d.prototype.get=b(c),c.set(e()),d.prototype.get=a}}var d=function(a){var b=this;b.subscribers=[],b.dependencies=[],"function"==typeof a?(b.update=c(b,a),b.update()):b.value=a},e=d,f=e.prototype;return f.get=a,f.set=function(a){if(this.value!=a){this.value=a;for(var b=0,c=this.subscribers.length;c>b;b++)this.subscribers[b](a)}},f.update=function(){},f.addSubscriber=function(a){return this.subscribers.push(a),this},f.removeSubscriber=function(a){for(var b=0,c=this.subscribers.length;c>b;b++)if(this.subscribers[b]==a){this.subscribers.splice(b,1);break}return this},f.clearSubscribers=function(){this.subscribers=[]},f.on=f.addSubscriber,f.off=f.removeSubscriber,f.addDependency=function(a){a.addSubscriber(this.update),this.dependencies.push(a)},f.removeDependency=function(a){for(var b=0,c=this.dependencies.length;c>b;b++)if(this.dependencies[b]==a){this.dependencies[b].removeSubscriber(this.update),this.dependencies.splice(b,1);break}},f.clearDependencies=function(){for(var a=0,b=this.dependencies.length;b>a;a++)this.dependencies[a].off(this.update);this.dependencies=[]},d}();